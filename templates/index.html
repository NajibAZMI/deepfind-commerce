<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recherche d'images</title>
    <link rel="stylesheet" href="../static/styles/styles.css">  <!-- Lien vers vos styles CSS -->
    <!-- Lien vers Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="../static/js/script.js" defer></script>
</head>
<body>
    <!-- Barre verticale fixe -->
    <div class="sidebar">
        <h2>Site de Commerce</h2>
        <ul>
            <li><a href="#"><i class="fas fa-home"></i> Accueil</a></li>
            <li><a href="#"><i class="fas fa-box"></i> Produits</a></li>
            <li><a href="#"><i class="fas fa-tags"></i> Offres spéciales</a></li>
            <li><a href="#"><i class="fas fa-phone-alt"></i> Contact</a></li>
            <li><a href="#"><i class="fas fa-info-circle"></i> À propos</a></li>
        </ul>
    </div>

    <!-- Contenu principal -->
    <div class="content">
        <!-- Conteneur commun pour la barre de recherche et les boutons -->
        <div class="top-container">
            <!-- Barre de recherche -->
            <div class="search-bar">
    <form action="/upload" method="POST" class="search-form">
        <input 
            type="text" 
            id="searchInput" 
            name="search" 
            placeholder="Rechercher un produit, marque ou catégorie..."
        >
        <button type="submit" id="searchButton">
            <i class="fas fa-search"></i>
        </button>
        <button type="button" id="cameraButton">
            <i class="fas fa-camera"></i>
        </button>
    </form>
</div>


            <!-- Formulaire de téléchargement et boutons supplémentaires -->
            <div class="extra-buttons">
                <a href="#" id="cartButton"><i class="fas fa-shopping-cart"></i> Panier</a>
                <a href="#"><i class="fas fa-sign-in-alt"></i> Se connecter</a>
                <a href="#"><i class="fas fa-question-circle"></i> Aide</a>
            </div>
        </div>

        <!-- Fenêtre modale pour le téléchargement d'image -->
        <div id="uploadModal">
            <div class="modal-content">
                <h3>Télécharger une image</h3>
                <form action="/upload" method="POST" enctype="multipart/form-data">
                    <input type="file" name="image" accept="image/*" required>
                    <button type="submit">Télécharger</button>
                </form>
                <button id="closeModal">Fermer</button>
            </div>
        </div>

        <!-- Affichage des résultats (si présents) -->
        <!-- Affichage des résultats (si présents) -->
{% if uploaded_image %}


<div class="image-grid"> <h1>Produits Disponibles</h1>
    {% if similar_images %}
   
        {% for image in similar_images %}
        
            <div class="card-container">
                <div class="image-card">
                    <img src="{{ url_for('static', filename='images/' + category + '/' + image) }}" alt="Image similaire">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <div class="price">40043 €</div>
                    <button class="add-to-cart" onclick="addToCart('{{ image }}')">Ajouter au panier</button>
                </div>
            </div>
        {% endfor %}
    {% else %}
    <p class="message-aucun-produit">Aucun produit trouvé pour cette recherche.</p>
    {% endif %}
</div>
{% else %}
<p class="message-recherche">Veuillez effectuer une recherche pour voir les produits.</p>
{% endif %}

    </div>

    <!-- Fenêtre modale du panier -->
    <div id="cartModal">
        <div class="cart-content">
            <h3>Votre Panier</h3>
            <ul id="cartItems">
                <!-- Les articles seront ajoutés ici -->
            </ul>
            <button onclick="closeCart()">Fermer</button>
        </div>
    </div>

</body>
</html>
